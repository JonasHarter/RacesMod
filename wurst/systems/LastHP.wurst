package LastHP
	import Cuff
	import UnitIndexer
		
	real array lastHP

	init
		LastHP x = new LastHP()
		
	/** Returns the last HP of a unit before dying **/
	public function unit.getLastHP() returns real
		return lastHP[this.getIndex()]
		
	class LastHP extends Cuff
		
		construct()
			super(false, false, false)

		override function running(unit target, integer level)
			if target.isAliveTrick()//target.getHP() > 0.~
				lastHP[target.getIndex()] = target.getHP()